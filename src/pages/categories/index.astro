---
import Base from "@/layouts/Base.astro";
import { getSinglePage } from "@/lib/contentParser.astro";
import { slugify } from "@/lib/utils/textConverter";
const categories = [
  {
    slug: "mindset",
    title: "Mindset",
    description: "Build the psychology and consistency that long-term investing requires.",
  },
  {
    slug: "pakistan-investing",
    title: "Pakistan Investing",
    description: "Practical actions and frameworks for Pakistani investors getting started.",
  },
  {
    slug: "global-investing",
    title: "Global Investing",
    description: "Diversify outside one market and one currency with a disciplined approach.",
  },
  {
    slug: "savings-income",
    title: "Savings & Income",
    description: "Increase your savings rate and income engine to accelerate the FIRE path.",
  },
  {
    slug: "calculators",
    title: "Calculators",
    description: "Use numbers to plan timelines, targets, and portfolio decisions with clarity.",
  },
  {
    slug: "case-studies",
    title: "Case Studies",
    description: "Real-world scenarios and portfolio examples with actionable takeaways.",
  },
];
import { BiCategoryAlt } from "react-icons/bi";
const posts = await getSinglePage("posts");
const categoryCounts = posts.reduce(
  (acc, post) => {
    post.data.categories.forEach((category: string) => {
      const key = slugify(category);
      acc[key] = (acc[key] || 0) + 1;
    });
    return acc;
  },
  {} as Record<string, number>
);
---

<Base title={"Categories"}>
  <section class="section">
    <div class="container">
      <h1 class="h2 page-heading">Categories</h1>
      <div class="row gy-4">
        {
          categories.map((category) => (
            <div class="col-12 md:col-6 lg:col-4">
              <a
                href={`/categories/${category.slug}`}
                class="group block h-full rounded-2xl border border-border bg-light p-6 transition hover:-translate-y-0.5 hover:border-primary"
              >
                <BiCategoryAlt className="mb-4 h-7 w-7 text-primary" />
                <h3 class="h5 mb-2 group-hover:text-primary">{category.title}</h3>
                <p class="mb-4 text-text">{category.description}</p>
                <p class="text-sm font-semibold text-dark">
                  {categoryCounts[category.slug] || 0}{" "}
                  {(categoryCounts[category.slug] || 0) === 1
                    ? "article"
                    : "articles"}
                </p>
              </a>
            </div>
          ))
        }
      </div>
    </div>
  </section>
</Base>
